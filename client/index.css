@tailwind base;
@tailwind components;
@tailwind utilities;

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
}

@media print {
  @page {
    size: landscape;
    margin: 0.5cm;
  }

  /* Hide sidebar and all other non-essential UI */
  .w-64,
  header,
  nav,
  button,
  .print-hidden {
    display: none !important;
  }

  /* Reset main container margins/padding */
  main,
  .flex-1,
  .h-screen,
  .min-h-screen {
    margin: 0 !important;
    padding: 0 !important;
    height: auto !important;
    min-height: 0 !important;
    width: 100% !important;
    overflow: visible !important;
    display: block !important;
  }

  /* Ensure backgrounds print */
  * {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }

  /* Specific fix for Attribution View tables */
  .print-table {
    border: 1px solid #000 !important;
    break-inside: avoid;
    margin-bottom: 20px;
    height: auto !important;
    overflow: visible !important;
    display: block !important;
  }

  .print-break-after {
    break-after: page !important;
    page-break-after: always !important;
    /* Fallback */
  }

  /* Hide scrollbars */
  ::-webkit-scrollbar {
    display: none;
  }

  /* Better distribution for print rows */
  .print-spaced-row {
    margin-bottom: 2cm !important;
    min-height: 35vh !important;
    /* Force row to expand vertically */
    display: flex !important;
    align-items: flex-end !important;
    /* Align content to bottom */
  }

  /* Ensure first row has some top breathing room */
  .print-top-spacing {
    margin-top: 1cm !important;
    align-items: flex-start !important;
    /* First row aligned top */
  }

  .print-break-after {
    break-after: page !important;
    page-break-after: always !important;
    display: block !important;
    /* Ensure it behaves as a block for breaking */
  }
}

@layer base {
  :root {
    /* === THEME CONFIGURATION === */
    /* Edit these values to change the app's look and feel */

    /* -- PAGE FUNDAMENTALS -- */
    --wallstreet-900: #f1f5f9;
    /* [Main Background]: The global background color behind everything. */
    --wallstreet-800: #ffffff;
    /* [Card Background]: The white background for charts, sidebars, and data tables. */
    --wallstreet-700: #e2e8f0;
    /* [Borders & Dividers]: Used for thin lines between sections and table rows. */

    /* -- INTERACTIVE ELEMENTS -- */
    --wallstreet-600: #cbd5e1;
    /* [Disabled/Secondary]: Used for disabled buttons or less important icons. */
    --wallstreet-accent: #0A2351;
    /* [Primary Brand Color]: Main buttons, active tabs, and key call-to-actions. */

    /* -- TEXT CONTROLS -- */
    --wallstreet-text: #0f172a;
    /* [Primary Text]: Main headings, body text, and table data. High contrast. */
    --wallstreet-500: #64748b;
    /* [Muted Text]: Subtitles, helper text, and less important labels. */

    /* -- STATUS INDICATORS -- */
    --wallstreet-danger: #dc2626;
    /* [Error/Negative]: Negative returns, delete buttons, error messages. */
    --wallstreet-success: #16a34a;
    /* [Success/Positive]: Positive returns, success badges (Green). */
    --wallstreet-warning: #eab308;
    /* [Warning]: Alerts that need attention but aren't critical (Yellow). */

    /* Legacy Mappings (for compatibility) */
    --bg-main: var(--wallstreet-900);
    --bg-card: var(--wallstreet-800);
    --bg-subtle: var(--wallstreet-900);
    --text-main: var(--wallstreet-text);
    --border-main: var(--wallstreet-700);
    --accent-primary: var(--wallstreet-accent);
  }

  body {
    background-color: var(--bg-main);
    color: var(--text-main);
  }
}

/* === PRINT STYLES === */
@media print {

  /* Hide non-essential UI elements */
  .no-print,
  .sidebar,
  nav,
  header,
  .print-hide {
    display: none !important;
  }

  /* Reset page fundamentals */
  html,
  body {
    background: white !important;
    margin: 0 !important;
    padding: 0 !important;
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }

  /* Page setup - landscape for 4-column layout */
  @page {
    size: landscape;
    margin: 0.25in;
  }

  /* Make print area fill page */
  .print-area {
    width: 100% !important;
    max-width: 100% !important;
    padding: 0 !important;
    margin: 0 !important;
  }

  /* Print row - 4 columns (M1, M2, M3, Q) */
  .print-row {
    display: grid !important;
    grid-template-columns: repeat(4, 1fr) !important;
    gap: 6px !important;
    page-break-inside: avoid !important;
    break-inside: avoid !important;
    margin-bottom: 6px !important;
  }

  /* Page break after every 2 rows (8 tables) */
  .print-row:nth-child(2n) {
    page-break-after: always;
  }

  /* Compact Print Table - matches Excel styling */
  .print-table-compact {
    border: 1px solid #000 !important;
    font-size: 8px !important;
    page-break-inside: avoid !important;
    break-inside: avoid !important;
  }

  .print-table-compact table {
    width: 100% !important;
    border-collapse: collapse !important;
  }

  .print-table-compact th,
  .print-table-compact td {
    padding: 2px 4px !important;
    font-size: 8px !important;
    border-bottom: 1px solid #ddd !important;
  }

  /* Legacy print-table support */
  .print-table {
    page-break-inside: avoid !important;
    break-inside: avoid !important;
  }

  /* Preserve colors */
  .text-green-700,
  .text-green-600,
  .text-green-800 {
    color: #15803d !important;
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }

  .text-red-700,
  .text-red-600,
  .text-red-800 {
    color: #b91c1c !important;
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }

  .bg-black,
  .bg-gray-800 {
    background-color: #000 !important;
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }

  .bg-green-100 {
    background-color: #dcfce7 !important;
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }

  .bg-red-100 {
    background-color: #fee2e2 !important;
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }

  .bg-gray-100,
  .bg-gray-200 {
    background-color: #e5e5e5 !important;
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }

  .text-white {
    color: #fff !important;
  }
}